// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Guild {
  // discord id
  id            String         @id
  VoiceChannels VoiceChannel[]
  Users         User[]
}

model VoiceChannel {
  // discord id
  id       String    @id
  Guild    Guild     @relation(fields: [guildId], references: [id])
  guildId  String
  Sessions Session[]
}

model User {
  // discord id
  id       String    @id
  Guilds   Guild[]
  Sessions Session[]
}

model Session {
  id             String       @id @default(uuid())
  VoiceChannel   VoiceChannel @relation(fields: [voiceChannelId], references: [id])
  voiceChannelId String
  Users          User[]
  startedAt      DateTime
  endedAt        DateTime?
}

// relation models
// model GuildsOnUsers {
//   guild      Guild    @relation(fields: [guildId], references: [id])
//   guildId    String
//   user       User     @relation(fields: [userId], references: [id])
//   userId     String
//   assignedAt DateTime @default(now())

//   @@id([guildId, userId])
// }

// model SessionsOnUsers {
//   session    Session  @relation(fields: [sessionId], references: [id])
//   sessionId  String
//   user       User     @relation(fields: [userId], references: [id])
//   userId     String
//   assignedAt DateTime @default(now())

//   @@id([sessionId, userId])
// }
